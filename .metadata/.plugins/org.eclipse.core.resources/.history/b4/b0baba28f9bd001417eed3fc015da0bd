  This program is free software you can redistribute it andor modify it under
  the terms of the GNU General Public License as published by the Free Software
  Foundation, either version 3 of the License, or (at your option) any later
  version.
  
  This program is distributed in the hope that it will be useful, but WITHOUT
  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
  FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
  details.
  
  You should have received a copy of the GNU General Public License along with
  this program. If not, see httpwww.gnu.orglicenses.
 

package handlers.voicedcommandhandlers;

import javolution.text.TextBuilder;

import com.l2jserver.Config;
import com.l2jserver.gameserver.handler.IVoicedCommandHandler;
import com.l2jserver.gameserver.model.actor.instance.L2PcInstance;
import com.l2jserver.gameserver.model.zone.ZoneId;
import com.l2jserver.gameserver.network.serverpackets.NpcHtmlMessage;


  Voice Command - SellBuff (.sellbuff)
  @author swarlog
 

public class SellBuff implements IVoicedCommandHandler
{
	private static final String[] _voicedCommands =
	{
		sellbuff
	};
	
	@Override
	public boolean useVoicedCommand(String command, L2PcInstance activeChar, String target)
	{
		if (Config.COMMAND_SELL_BUFF)
		{
			if (command.equals(sellbuff))
			{
				if (activeChar == null)
				{
					return false;
				}
				
				if (activeChar.isSellBuff())
				{
					activeChar.setSellBuff(false);
					activeChar.standUp();
					activeChar.getAppearance().setNameColor(activeChar.getOldNameColor());
					activeChar.setTitle(activeChar.getOldTitle());
					activeChar.getAppearance().setTitleColor(activeChar.getOldTitleColor());
					activeChar.broadcastUserInfo();
					activeChar.broadcastTitleInfo();
				}
				else
				{
					if (activeChar.isDead()  activeChar.isAlikeDead())
					{
						activeChar.sendMessage(You are dead, you can't sell at the moment!);
						return false;
					}
					else if (!activeChar.isInsideZone(ZoneId.PEACE))
				{
						activeChar.sendMessage(You are not in peaceful zone, you can sell only in peaceful zones!);
						return false;
					}
					else if (activeChar.isInOlympiadMode())
					{
						activeChar.sendMessage(You are in olympiad , you can't sell buff at the moment.);
						return false;
					}
					else if ((activeChar.getPvpFlag()  0)  activeChar.isInCombat()  (activeChar.getKarma()  0))
					{
						activeChar.sendMessage(You are in combat mode, you can't sell at the moment!);
						return false;
					}
					else if ((activeChar.getClassId().getId() != 98) && (activeChar.getClassId().getId() != 17  buffer humano
					) && (activeChar.getClassId().getId() != 105) && (activeChar.getClassId().getId() != 30  buffer elf
					) && (activeChar.getClassId().getId() != 112) && (activeChar.getClassId().getId() != 43  buffer dark elf
					) && (activeChar.getClassId().getId() != 100) && (activeChar.getClassId().getId() != 21  sword singer
					) && (activeChar.getClassId().getId() != 107) && (activeChar.getClassId().getId() != 34  blade dancer
					) && (activeChar.getClassId().getId() != 115) && (activeChar.getClassId().getId() != 116  buffer orc
					) && (activeChar.getClassId().getId() != 51) && (activeChar.getClassId().getId() != 52  buffer orc
					))
					{
						activeChar.sendMessage(Just the class of buffer can sell buffs!);
						return false;
					}
					
					TextBuilder tb = new TextBuilder(0);
					tb.append(htmltitle.. Sell Buff Panel ..titlebodycenter);
					tb.append(tabletr);
					tb.append(tdimg src=icon.etc_alphabet_b_i00 width=32 height=32 align=lefttdtdimg src=icon.etc_alphabet_u_i00 width=32 height=32 align=lefttd);
					tb.append(tdimg src=icon.etc_alphabet_f_i00 width=32 height=32 align=lefttdtdimg src=icon.etc_alphabet_f_i00 width=32 height=32 align=lefttd);
					tb.append(trtablebr);
					tb.append(brfont color=LEVELHellofont, complete this form to sell your buff!br);
					tb.append(pfont color=LEVELPrice of Bufffontp);
					tb.append(pedit var=pri width=120 height=15p);
					tb.append(button value=Sell Buff Now action=bypass -h actr $pri width=200 height=32 back=L2UI_ct1.button_df fore=L2UI_ct1.button_df);
					tb.append(centerbr);
					tb.append(centerfont color=LEVEL.. U3Games L2Dev Team ..center);
					tb.append(bodyhtml);
					NpcHtmlMessage n = new NpcHtmlMessage(0);
					n.setHtml(tb.toString());
					activeChar.sendPacket(n);
				}
			}
		}
		else
		{
			activeChar.sendMessage(Command disabled!);
			return false;
		}
		
		return false;
	}
	
	@Override
	public String[] getVoicedCommandList()
	{
		return _voicedCommands;
	}
}